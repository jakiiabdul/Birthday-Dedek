<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Dedekk</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: url("dedekk.jpg") no-repeat center center fixed;
  background-size: cover;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}
.container {
  background: rgba(255,255,255,0.95);
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  text-align: center;
  width: 500px;
}
input, select, button {
  margin: 10px 0;
  padding: 10px;
  width: 90%;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
}
button {
  background: #ee9ca7;
  color: white;
  border: none;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { background: #ff758c; }
.hidden { display: none !important; }
.result { font-weight: bold; margin-top: 15px; font-size: 16px; }
.message-box { min-height: 120px; margin: 15px 0; font-size: 15px; line-height: 1.4em; text-align: center; display:flex; justify-content: space-between; align-items: center; }
.img-left, .img-right { display: flex; flex-direction: column; gap:5px; }
.img-left img, .img-right img { width: 60px; height: 60px; object-fit: cover; opacity:0; transition: opacity 0.5s; border-radius:5px; }
.message-text { flex:1; margin:0 10px; text-align:center; }
.overlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.music-box {
  background: white;
  padding: 20px 30px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  text-align: center;
  animation: fadeIn 0.3s ease;
}
.music-box button {
  margin: 10px; padding: 10px 20px;
  border-radius: 8px; border: none;
  cursor: pointer; background: #ee9ca7; color:white;
  transition: 0.3s;
}
.music-box button:hover { background:#ff758c; }
@keyframes fadeIn { from{opacity:0; transform:scale(0.9);} to{opacity:1; transform:scale(1);} }
</style>
</head>
<body>

<div class="container">
  <h2>üéÇ Selamat Ulang Tahun Dedekk! üéÇ</h2>

  <!-- Step 1: Nama -->
  <div id="step1">
    <input type="text" id="nameInput" placeholder="Masukkan nama panggilan" onclick="showMusicOverlay()">
    <button onclick="checkName()">Next</button>
    <p id="errorMsg" style="color:red;"></p>
  </div>

  <!-- Step 2: Verifikasi -->
  <div id="step2" class="hidden">
    <p>Kamu ceweknya Zaky apa bukan?</p>
    <select id="answerSelect">
      <option value="">-- Pilih jawaban --</option>
      <option value="iya">Iya</option>
      <option value="bukan">Bukan</option>
    </select>
    <button onclick="verifyAnswer()">Verifikasi</button>
    <p class="result" id="verifyResult"></p>
    <button id="nextMessageBtn" class="hidden" onclick="goToMessages()">Lanjut ‚û°Ô∏è</button>
  </div>

  <!-- Step 3: Pesan -->
  <div id="stepMessage" class="hidden">
    <div id="messageBox" class="message-box"></div>
  </div>
</div>

<!-- Musik Overlay -->
<div id="musicOverlay" class="overlay hidden">
  <div class="music-box">
    <p>Mau pake background music nggak?</p>
    <button onclick="startMusic()">Iya</button>
    <button onclick="skipMusic()">Nggak</button>
  </div>
</div>

<!-- Musik -->
<audio id="bgMusic" preload="auto" loop>
  <source src="lala.mp3" type="audio/mpeg">
  Browser kamu tidak mendukung audio.
</audio>

<script>
let musicAsked = false;
const music = document.getElementById("bgMusic");

const messages = [
  "Happy Birthday, sayangku Dedekk! üíñ",
  "Aku pengen bilang, aku saaaayaaaangg banget sama kamu, cintakuuu, maniskuuu, duniakuuu, calon istrikuuu.",
  "Semoga di umur baru ini semua impian dan wish list kita bisa kita wujudkan bareng, dari hal-hal kecil sampai hal-hal besar.",
  "Aku selalu pengen kamu sehat, bahagia setiap hari, dan semoga kita bisa hidup lebih lama bareng, ngelewatin semua hal seru, konyol, dan manis yang bikin kita senyum terus.",
  "Tetap jadi diri kamu sendiri, ya.",
  "Kamu nggak pernah sendiri, aku selalu ada di sampingmu, walaupun kadang jarak memisahkan kita.",
  "Terima kasih udah selalu jadi kamu yang lucu, manis, dan nggak tergantikan.",
  "Aku seneng banget bisa nemenin kamu, ngerayain hari spesialmu, dan aku harap setiap momen tahun ini penuh tawa, kejutan kecil, dan cinta yang makin dalam antara kita.",
  "Wopyuu ssaayangkuu cintakuuy! üíñ‚ú®"
];

const messageImages = {
  left: ["l1.jpg","l2.jpg","l3.jpg"],
  right: ["r1.jpg","r2.jpg","r3.jpg"]
};

function showMusicOverlay() {
  if(!musicAsked){
    document.getElementById("musicOverlay").classList.remove("hidden");
    musicAsked = true;
  }
}

function startMusic(){
  music.currentTime = 0;
  music.play().catch(err=>console.log("Autoplay diblokir:", err));
  closeOverlay();
}

function skipMusic(){ closeOverlay(); }
function closeOverlay(){
  document.getElementById("musicOverlay").classList.add("hidden");
  document.getElementById("nameInput").focus();
}

function checkName(){
  const name = document.getElementById("nameInput").value.trim().toLowerCase();
  const errorMsg = document.getElementById("errorMsg");
  if(name==="echa" || name==="dedekk"){
    errorMsg.textContent="";
    document.getElementById("step1").classList.add("hidden");
    document.getElementById("step2").classList.remove("hidden");
  } else {
    errorMsg.textContent="Nama salah! coba masukin nama panggilan lain.";
  }
}

function verifyAnswer(){
  const answer = document.getElementById("answerSelect").value;
  const result = document.getElementById("verifyResult");
  const nextBtn = document.getElementById("nextMessageBtn");
  if(answer==="iya"){
    result.textContent="‚úÖ Terverifikasi";
    result.style.color="green";
    nextBtn.classList.remove("hidden");
  } else if(answer==="bukan"){
    result.textContent="‚ùå Tidak Terverifikasi";
    result.style.color="red";
    nextBtn.classList.add("hidden");
  } else {
    result.textContent="Pilih dulu jawabannya!";
    result.style.color="orange";
    nextBtn.classList.add("hidden");
  }
}

function goToMessages(){
  document.getElementById("step2").classList.add("hidden");
  document.getElementById("stepMessage").classList.remove("hidden");
  showMessages();
}

// Typewriter + fade-in foto
let msgIndex=0, charIndex=0;
const messageBox = document.getElementById("messageBox");

function showMessages(){
  msgIndex=0; charIndex=0; messageBox.innerHTML="";
  typeMessage();
}

function typeMessage(){
  if(msgIndex<messages.length){
    const currentMsg = messages[msgIndex];
    if(charIndex===0){
      const msgDiv = document.createElement("div");
      msgDiv.classList.add("msg");

      // kiri
      const leftDiv = document.createElement("div");
      leftDiv.classList.add("img-left");
      messageImages.left.forEach(src=>{
        const img = document.createElement("img");
        img.src=src;
        leftDiv.appendChild(img);
      });
      msgDiv.appendChild(leftDiv);

      // teks
      const textSpan = document.createElement("span");
      textSpan.classList.add("message-text");
      msgDiv.appendChild(textSpan);

      // kanan
      const rightDiv = document.createElement("div");
      rightDiv.classList.add("img-right");
      messageImages.right.forEach(src=>{
        const img = document.createElement("img");
        img.src=src;
        rightDiv.appendChild(img);
      });
      msgDiv.appendChild(rightDiv);

      messageBox.appendChild(msgDiv);
    }

    const p = document.querySelector(".msg:last-child .message-text");
    const imgs = document.querySelectorAll(".msg:last-child img");

    if(charIndex<currentMsg.length){
      p.textContent += currentMsg.charAt(charIndex);
      charIndex++;

      // fade-in seiring teks
      const progress = charIndex / currentMsg.length;
      imgs.forEach(img => img.style.opacity = progress);

      setTimeout(typeMessage, 80);
    } else {
      msgIndex++;
      charIndex=0;
      setTimeout(typeMessage, 1200);
    }
  }
}
</script>
</body>
</html>
