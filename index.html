<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Dedekk</title>
<style>
/* ---------- Body & Container ---------- */
body {
  font-family: 'Comic Sans MS', cursive, sans-serif;
  background: #ffd1dc;
  overflow-x: hidden;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  position: relative;
}
.container {
  background: rgba(255,255,255,0.95);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
  text-align: center;
  width: 500px;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  z-index: 10;
}
h2 { margin-top:0; }

/* ---------- Inputs & Buttons ---------- */
input, select, button {
  margin: 10px 0;
  padding: 10px;
  width: 90%;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 14px;
}
button {
  background: #ee9ca7;
  color: white;
  border: none;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { background: #ff758c; }
.hidden { display: none !important; }
.result { font-weight: bold; margin-top: 15px; font-size: 16px; }

/* ---------- Messages ---------- */
.message-box { 
  display: flex;
  flex-direction: column;
  gap: 40px; 
  margin-top: 20px;
}
.message-item {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 20px;
  justify-content: center;
}
.message-item.left { justify-content: flex-start; }
.message-item.right { justify-content: flex-end; }
.message-text {
  text-align: center;
  font-size: 16px;
  line-height: 1.5em;
  max-width: 250px;
  background: rgba(255,255,255,0.7);
  padding: 10px 15px;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.message-img {
  width: 150px;
  height: 150px;
  object-fit: cover;
  border-radius: 15px;
  opacity: 0;
  transform: rotate(-8deg);
  transition: opacity 2.5s ease, transform 1.5s ease;
}

/* ---------- Musik Overlay ---------- */
.overlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.music-box {
  background: white;
  padding: 20px 30px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  text-align: center;
}
.music-box button {
  margin: 10px; padding: 10px 20px;
  border-radius: 8px; border: none;
  cursor: pointer; background: #ee9ca7; color:white;
  transition: 0.3s;
}
.music-box button:hover { background:#ff758c; }

/* ---------- Balon ---------- */
.ballon {
  position: absolute;
  bottom: -150px;
  width: 60px;
  height: 80px;
  background: radial-gradient(circle at 30% 30%, #fff, #ff7eb9);
  border-radius: 50% 50% 50% 50%;
  animation: rise 10s infinite linear;
  z-index: 1;
}
.ballon::after {
  content: "";
  position: absolute;
  bottom: -20px;
  left: 50%;
  width: 2px;
  height: 20px;
  background: #000;
  transform: translateX(-50%);
}
@keyframes rise {
  0% { transform: translateY(0) rotate(0deg); opacity:0; }
  10% { opacity:1; }
  100% { transform: translateY(-120vh) rotate(360deg); opacity:0; }
}

/* ---------- Assets Lucu ---------- */
.asset {
  position: absolute;
  width: 50px;
  height: 50px;
  opacity: 0.8;
  animation: floatAnim 6s infinite ease-in-out;
  z-index: 2;
}
.asset.star { background: url('star.png') no-repeat center/contain; }
.asset.heart { background: url('heart.png') no-repeat center/contain; }
.asset.smiley { background: url('smiley.png') no-repeat center/contain; }
.asset.confetti { background: url('confetti.png') no-repeat center/contain; }

@keyframes floatAnim {
  0% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(15deg); }
  100% { transform: translateY(0px) rotate(0deg); }
}
</style>
</head>
<body>

<div class="container">
  <h2>üéÇ Selamat Ulang Tahun Dedekk! üéÇ</h2>

  <!-- Step 1 -->
  <div id="step1">
    <input type="text" id="nameInput" placeholder="Masukkan nama panggilan" onclick="showMusicOverlay()">
    <button onclick="checkName()">Next</button>
    <p id="errorMsg" style="color:red;"></p>
  </div>

  <!-- Step 2 -->
  <div id="step2" class="hidden">
    <p>Kamu ceweknya Zaky apa bukan?</p>
    <select id="answerSelect">
      <option value="">-- Pilih jawaban --</option>
      <option value="iya">Iya</option>
      <option value="bukan">Bukan</option>
    </select>
    <button onclick="verifyAnswer()">Verifikasi</button>
    <p class="result" id="verifyResult"></p>
    <button id="nextMessageBtn" class="hidden" onclick="goToMessages()">Lanjut ‚û°Ô∏è</button>
  </div>

  <!-- Step 3 -->
  <div id="stepMessage" class="hidden">
    <div id="messageBox" class="message-box"></div>
  </div>
</div>

<!-- Musik Overlay -->
<div id="musicOverlay" class="overlay hidden">
  <div class="music-box">
    <p>Mau pake background music nggak?</p>
    <button onclick="startMusic()">Iya</button>
    <button onclick="skipMusic()">Nggak</button>
  </div>
</div>

<!-- Musik -->
<audio id="bgMusic" preload="auto" loop>
  <source src="lala.mp3" type="audio/mpeg">
</audio>

<!-- Balon -->
<div class="ballon" style="left:10%; animation-delay:0s;"></div>
<div class="ballon" style="left:25%; animation-delay:2s;"></div>
<div class="ballon" style="left:40%; animation-delay:4s;"></div>
<div class="ballon" style="left:60%; animation-delay:1s;"></div>
<div class="ballon" style="left:75%; animation-delay:3s;"></div>

<!-- Assets Lucu -->
<div class="asset star" style="top:10%; left:5%; animation-delay:1s;"></div>
<div class="asset heart" style="top:20%; left:80%; animation-delay:2s;"></div>
<div class="asset smiley" style="top:50%; left:10%; animation-delay:3s;"></div>
<div class="asset star" style="top:60%; left:70%; animation-delay:4s;"></div>
<div class="asset confetti" style="top:30%; left:50%; animation-delay:2.5s;"></div>

<script>
let musicAsked=false;
const music = document.getElementById("bgMusic");

const messages = [
  "Happy Birthday, sayangku Dedekk! üíñ",
  "Aku pengen bilang, aku saaaayaaaangg banget sama kamu, cintakuuu, maniskuuu, duniakuuu, calon istrikuuu.",
  "Semoga di umur baru ini semua impian dan wish list kita bisa kita wujudkan bareng, dari hal-hal kecil sampai hal-hal besar.",
  "Aku selalu pengen kamu sehat, bahagia setiap hari, dan semoga kita bisa hidup lebih lama bareng, ngelewatin semua hal seru, konyol, dan manis yang bikin kita senyum terus.",
  "Tetap jadi diri kamu sendiri, ya.",
  "Kamu nggak pernah sendiri, aku selalu ada di sampingmu, walaupun kadang jarak memisahkan kita.",
  "Terima kasih udah selalu jadi kamu yang lucu, manis, dan nggak tergantikan.",
  "Aku seneng banget bisa nemenin kamu, ngerayain hari spesialmu, dan aku harap setiap momen tahun ini penuh tawa, kejutan kecil, dan cinta yang makin dalam antara kita.",
  "Wopyuu ssaayangkuu cintakuuy! üíñ‚ú®"
];

const messageImages = [
  "img1.jpg", "img2.jpg", "img3.jpg",
  "img4.jpg", "img5.jpg", "img6.jpg",
  "img7.jpg", "img8.jpg", "img9.jpg"
];

// ---------- Musik Overlay ----------
function showMusicOverlay() {
  if(!musicAsked){
    document.getElementById("musicOverlay").classList.remove("hidden");
    musicAsked = true;
  }
}
function startMusic(){ music.play().catch(()=>{}); closeOverlay(); }
function skipMusic(){ closeOverlay(); }
function closeOverlay(){ document.getElementById("musicOverlay").classList.add("hidden"); document.getElementById("nameInput").focus(); }

// ---------- Step 1 & 2 ----------
function checkName(){
  const name = document.getElementById("nameInput").value.trim().toLowerCase();
  const errorMsg=document.getElementById("errorMsg");
  if(name==="echa" || name==="dedekk"){ 
    errorMsg.textContent="";
    document.getElementById("step1").classList.add("hidden");
    document.getElementById("step2").classList.remove("hidden");
  } else { errorMsg.textContent="Nama salah! coba masukin nama panggilan lain."; }
}
function verifyAnswer(){
  const answer = document.getElementById("answerSelect").value;
  const result = document.getElementById("verifyResult");
  const nextBtn = document.getElementById("nextMessageBtn");
  if(answer==="iya"){ result.textContent="‚úÖ Terverifikasi"; result.style.color="green"; nextBtn.classList.remove("hidden"); }
  else if(answer==="bukan"){ result.textContent="‚ùå Tidak Terverifikasi"; result.style.color="red"; nextBtn.classList.add("hidden"); }
  else{ result.textContent="Pilih dulu jawabannya!"; result.style.color="orange"; nextBtn.classList.add("hidden"); }
}

// ---------- Messages Typewriter ----------
function goToMessages(){
  document.getElementById("step2").classList.add("hidden");
  document.getElementById("stepMessage").classList.remove("hidden");
  showMessages();
}

function showMessages(){
  const box=document.getElementById("messageBox");
  box.innerHTML="";
  let idx=0;
  function showNext(){
    if(idx<messages.length){
      const div=document.createElement("div");
      div.className="message-item "+(idx%2===0?"left":"right");
      const textP=document.createElement("p");
      textP.className="message-text";
      div.appendChild(textP);
      const img=document.createElement("img");
      img.className="message-img";
      img.src=messageImages[idx];
      div.appendChild(img);
      box.appendChild(div);

      let charIdx=0;
      function typeChar(){
        if(charIdx<messages[idx].length){
          textP.textContent+=messages[idx].charAt(charIdx);
          charIdx++;
          setTimeout(typeChar,50);
        } else {
          // fade in image
          img.style.opacity=1;
          img.style.transform="rotate(0deg)";
        }
      }
      typeChar();
      idx++;
      setTimeout(showNext, 1800);
    }
  }
  showNext();
}
</script>
</body>
</html>
