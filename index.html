<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Dedekk</title>
<style>
body {
  font-family: 'Comic Sans MS', cursive, sans-serif;
  background: #ffd1dc; /* pastel pink */
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  overflow: hidden; /* biar animasi keluar halaman ga scroll */
}

.container {
  background: rgba(255,255,255,0.95);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
  text-align: center;
  width: 500px;
  max-height: 90vh;
  overflow-y: auto;
}

input, select, button {
  margin: 10px 0;
  padding: 10px;
  width: 90%;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 14px;
}
button {
  background: #ee9ca7;
  color: white;
  border: none;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { background: #ff758c; }

.hidden { display: none !important; }
.result { font-weight: bold; margin-top: 15px; font-size: 16px; }

.message-box { 
  display: flex;
  flex-direction: column;
  gap: 40px; 
  margin-top: 20px;
}

.message-item {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 20px;
  justify-content: center;
}

.message-item.left { justify-content: flex-start; }
.message-item.right { justify-content: flex-end; }

.message-text {
  text-align: center;
  font-size: 16px;
  line-height: 1.5em;
  max-width: 250px;
  background: rgba(255,255,255,0.7);
  padding: 10px 15px;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.message-img {
  width: 140px;
  height: 140px;
  object-fit: cover;
  border-radius: 15px;
  opacity: 0;
  transform: rotate(-8deg);
  transition: opacity 2.5s ease, transform 1.5s ease;
}

.overlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.music-box {
  background: white;
  padding: 20px 30px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  text-align: center;
}

.music-box button {
  margin: 10px; padding: 10px 20px;
  border-radius: 8px; border: none;
  cursor: pointer; background: #ee9ca7; color:white;
  transition: 0.3s;
}
.music-box button:hover { background:#ff758c; }

/* BALON ANIMASI */
.balloon {
  position: absolute;
  bottom: -100px;
  width: 50px;
  height: 70px;
  background: radial-gradient(circle at 30% 30%, #ff9ce1, #ff61a6);
  border-radius: 50% 50% 50% 50%;
  opacity: 0.8;
  animation: floatUp linear infinite;
}
@keyframes floatUp {
  0% { transform: translateY(0) rotate(0deg); opacity: 0; }
  10% { opacity: 0.8; }
  100% { transform: translateY(-110vh) rotate(360deg); opacity: 0.2; }
}

/* ASSETS CUTE */
.asset {
  position: absolute;
  font-size: 24px;
  opacity: 0.7;
  animation: moveAsset linear infinite;
}

@keyframes moveAsset {
  0% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0); }
}
</style>
</head>
<body>

<div class="container">
  <h2>üéÇ Selamat Ulang Tahun Dedekk! üéÇ</h2>

  <div id="step1">
    <input type="text" id="nameInput" placeholder="Masukkan nama panggilan" onclick="showMusicOverlay()">
    <button onclick="checkName()">Next</button>
    <p id="errorMsg" style="color:red;"></p>
  </div>

  <div id="step2" class="hidden">
    <p>Kamu ceweknya Zaky apa bukan?</p>
    <select id="answerSelect">
      <option value="">-- Pilih jawaban --</option>
      <option value="iya">Iya</option>
      <option value="bukan">Bukan</option>
    </select>
    <button onclick="verifyAnswer()">Verifikasi</button>
    <p class="result" id="verifyResult"></p>
    <button id="nextMessageBtn" class="hidden" onclick="goToMessages()">Lanjut ‚û°Ô∏è</button>
  </div>

  <div id="stepMessage" class="hidden">
    <div id="messageBox" class="message-box"></div>
  </div>
</div>

<div id="musicOverlay" class="overlay hidden">
  <div class="music-box">
    <p>Mau pake background music nggak?</p>
    <button onclick="startMusic()">Iya</button>
    <button onclick="skipMusic()">Nggak</button>
  </div>
</div>

<audio id="bgMusic" preload="auto" loop>
  <source src="lala.mp3" type="audio/mpeg">
  Browser kamu tidak mendukung audio.
</audio>

<!-- BALON DAN ASSETS -->
<script>
// buat balon random
function createBalloons(num){
  for(let i=0;i<num;i++){
    let b = document.createElement("div");
    b.classList.add("balloon");
    b.style.left = Math.random()*90 + "vw";
    b.style.width = 40+Math.random()*30+"px";
    b.style.height = 60+Math.random()*30+"px";
    b.style.animationDuration = 5 + Math.random()*5 + "s";
    document.body.appendChild(b);
  }
}

// buat assets lucu (‚òÖ, üíñ, üéà)
function createAssets(num){
  const icons = ["‚òÖ","üíñ","üéÄ","üç¨","üéµ","üéâ"];
  for(let i=0;i<num;i++){
    let a = document.createElement("div");
    a.classList.add("asset");
    a.style.left = Math.random()*95 + "vw";
    a.style.top = Math.random()*80 + "vh";
    a.textContent = icons[Math.floor(Math.random()*icons.length)];
    a.style.fontSize = 20 + Math.random()*20 + "px";
    a.style.animationDuration = 3 + Math.random()*4 + "s";
    document.body.appendChild(a);
  }
}

createBalloons(12);
createAssets(15);
</script>

<script>
// === kode typewriter & verifikasi ===
let musicAsked = false;
const music = document.getElementById("bgMusic");

const messages = [
  "Happy Birthday, sayangku Dedekk! üíñ",
  "Aku pengen bilang, aku saaaayaaaangg banget sama kamu, cintakuuu, maniskuuu, duniakuuu, calon istrikuuu.",
  "Semoga di umur baru ini semua impian dan wish list kita bisa kita wujudkan bareng, dari hal-hal kecil sampai hal-hal besar.",
  "Aku selalu pengen kamu sehat, bahagia setiap hari, dan semoga kita bisa hidup lebih lama bareng, ngelewatin semua hal seru, konyol, dan manis yang bikin kita senyum terus.",
  "Tetap jadi diri kamu sendiri, ya.",
  "Kamu nggak pernah sendiri, aku selalu ada di sampingmu, walaupun kadang jarak memisahkan kita.",
  "Terima kasih udah selalu jadi kamu yang lucu, manis, dan nggak tergantikan.",
  "Aku seneng banget bisa nemenin kamu, ngerayain hari spesialmu, dan aku harap setiap momen tahun ini penuh tawa, kejutan kecil, dan cinta yang makin dalam antara kita.",
  "Wopyuu ssaayangkuu cintakuuy! üíñ‚ú®"
];

// 9 foto kiri-kanan selang
const messageImages = [
  "l1.jpg","r1.jpg",
  "l2.jpg","r2.jpg",
  "l3.jpg","r3.jpg",
  "l4.jpg","r4.jpg",
  "l5.jpg"
];

function showMusicOverlay() {
  if(!musicAsked){
    document.getElementById("musicOverlay").classList.remove("hidden");
    musicAsked = true;
  }
}

function startMusic(){
  music.currentTime = 0;
  music.play().catch(err=>console.log("Autoplay diblokir:", err));
  closeOverlay();
}

function skipMusic(){ closeOverlay(); }
function closeOverlay(){
  document.getElementById("musicOverlay").classList.add("hidden");
  document.getElementById("nameInput").focus();
}

function checkName(){
  const name = document.getElementById("nameInput").value.trim().toLowerCase();
  const errorMsg = document.getElementById("errorMsg");
  if(name==="echa" || name==="dedekk"){
    errorMsg.textContent="";
    document.getElementById("step1").classList.add("hidden");
    document.getElementById("step2").classList.remove("hidden");
  } else {
    errorMsg.textContent="Nama salah! coba masukin nama panggilan lain.";
  }
}

function verifyAnswer(){
  const answer = document.getElementById("answerSelect").value;
  const result = document.getElementById("verifyResult");
  const nextBtn = document.getElementById("nextMessageBtn");
  if(answer==="iya"){
    result.textContent="‚úÖ Terverifikasi";
    result.style.color="green";
    nextBtn.classList.remove("hidden");
  } else if(answer==="bukan"){
    result.textContent="‚ùå Tidak Terverifikasi";
    result.style.color="red";
    nextBtn.classList.add("hidden");
  } else {
    result.textContent="Pilih dulu jawabannya!";
    result.style.color="orange";
    nextBtn.classList.add("hidden");
  }
}

function goToMessages(){
  document.getElementById("step2").classList.add("hidden");
  document.getElementById("stepMessage").classList.remove("hidden");
  showMessages();
}

// Typewriter + foto kiri-kanan fade-in pelan
let msgIndex=0, charIndex=0, imgIndex=0;
const messageBox = document.getElementById("messageBox");

function showMessages(){
  msgIndex=0; charIndex=0; imgIndex=0; messageBox.innerHTML="";
  typeMessage();
}

function typeMessage(){
  if(msgIndex < messages.length){
    let currentMsg = messages[msgIndex];

    if(charIndex===0){
      const itemDiv = document.createElement("div");
      itemDiv.classList.add("message-item");
      itemDiv.classList.add(imgIndex % 2 === 0 ? "left" : "right");

      const p = document.createElement("p");
      p.classList.add("message-text");
      itemDiv.appendChild(p);

      if(imgIndex < messageImages.length){
        const img = document.createElement("img");
        img.src = messageImages[imgIndex];
        img.classList.add("message-img");
        itemDiv.appendChild(img);
        setTimeout(()=>{
          img.style.opacity = 1;
          img.style.transform = "rotate(0deg)";
        }, 200);
        imgIndex++;
      }

      messageBox.appendChild(itemDiv);
    }

    const p = messageBox.querySelector(".message-item:last-child .message-text");

    if(charIndex < currentMsg.length){
      p.textContent += currentMsg.charAt(charIndex);
      charIndex++;
      setTimeout(typeMessage, 60);
    } else {
      charIndex=0;
      msgIndex++;
      setTimeout(typeMessage, 400);
    }
  }
}
</script>
</body>
</html>
